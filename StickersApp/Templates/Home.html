{% extends 'Base.html' %}
{% load static %}
{% block contenido %}

  <div class="container">
    {% if not user.is_authenticated %}
    <div class="d-flex justify-content-center">
      <div class="p-3 px-5 m-3 alert alert-warning alert-dismissible fade show m-2 p-2 text-center" role="alert">
        <div class="h5">
          <strong>
            Inicio de Sesion
          </strong>
      </div>
      <div class="h6">
        No se ha iniciado sesion , pulse <br>
         <span style="border-radius: 60px;" class="mx-auto my-auto badge bg-success p-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">
          <svg  width="18" height="18" fill="currentColor" class="h6 d-block mx-auto bi bi-person-circle" viewBox="0 0 16 16">
            <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
            <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
          </svg>
            Ingresar
        </span>
        <br>
         para iniciar la sesion
      </div> 
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    </div>
        
    {% endif %}
  </div>
<div class="continer">
    {% comment %} <div class="text-center"> 
      <div class="display-1 m-3 ">Hoy</div>
      <hr></hr>
    </div>
    <div class="row justify-content-around cols-1 cols-md-2 cols-lg-3 cols-xl-3">
      <div class="col-auto mx-5 w-3 txt-center">
        <table class="table table-dark centrado shadow p-3 mb-5 bg-body-tertiary rounded">
          <thead>
            <tr>
                <th scope="col">Productos Agregados</th>
            </tr>
          </thead>
          <tbody class="table-group-divider">
            {% for product in productsEP %}
              <tr>
                  <td>
                    <a class="link-light h4" style=" text-decoration: none;" {% if user.is_authenticated %} href="{% url 'producto' product.id %}" {% endif %}>
                      <span {% if user.is_authenticated %} class="badge bg-info w-75 text-break" {% endif %}>
                          {{product.name}}
                      </span>
                  </a>
                  </td>
              </tr>
            {% empty %}
              <tr>
                <td>
                  <div class="h3">
                    No hay Productos Agregados Hoy en la Almacen
                  </div>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      <div class="col-auto mx-5 w-3 txt-center">
        <table class="table table-dark centrado shadow p-3 mb-5 bg-body-tertiary rounded">
            <thead>
            <tr>
                <th scope="col">Productos Vendidos</th>
            </tr>
            </thead>
            <tbody class="table-group-divider">
              {% for product in productsVP %}
                <tr>
                    <td>
                      
                      
                      <a class="link-light h4" style=" text-decoration: none;" {% if user.is_authenticated %} href="{% url 'producto' product.id %}" {% endif %}>
                        <span {% if user.is_authenticated %} class="badge bg-success w-75 text-break" {% endif %}>
                            {{product.name}}
                        </span>
                      </a>            
                    </td>
                </tr>
              {% empty %}
                <tr>
                  <td>
                    <div class="h3">
                      No hay Productos Vendidos Hoy en la Almacen
                    </div>
                  </td>
                </tr>
              {% endfor %}
            </tbody>
        </table>
      </div>
      {% if user.is_authenticated %}
        <div class="col-auto mx-5 w-3 txt-center">
          <table class="table table-dark centrado shadow p-3 mb-5 bg-body-tertiary rounded">
              <thead>
                <tr>
                    <th scope="col">Ultimas 5 Transacciones</th>
                </tr>
              </thead>
              <tbody class="table-group-divider">
                {% for movement in movM %}
                  <tr>
                      <td >
                        <div class="row text-center">
                          <div class="col-6 ">
                            {{movement.get_type_display}}:
                          </div>
                          <div class="col-6">
                            {% if movement.type != "RD" %}
                            <a class="link-light h4" style=" text-decoration: none;" {% if movement.type != "RP" %} href="{% url 'producto' movement.product.id %}"{% endif %} >
                              <span  
                              {% if movement.type == "VP" %}
                                    class="badge bg-success w-75 text-break"
                                {% elif movement.type == "eP" %}
                                    class="badge bg-warning w-75 text-break"
                                {% elif movement.type == "EP" %}
                                    class="badge bg-info w-75 text-break"
                                {% elif movement.type == "rP" %}
                                    class="badge w-75 text-break" style="background-color: orangered; color: white;"
                                {% elif movement.type == "RP" %}
                                    class="badge bg-danger  w-75 text-break"
                                {% elif movement.type == "CP" %}
                                    class="badge bg-primary w-75 text-break"
                                {% else %}
                                    class="badge bg-secondary w-75 text-break"
                                {% endif %}
                                >
                                {% if movement.type == "RP" %}
                                  {{movement.product.description}}  
                                {% else %}
                                  {{movement.product.name}}  
                                {% endif %}
                              </span>
                            </a>
                            {% else %}
                              -
                          {% endif %}
                          </div>
                        </div>
                      </td>   
                  </tr>
                {% empty %}
                  <tr>
                    <td>
                      <div class="h3">
                        No hay Movmimientos Hoy en la Almacen
                      </div>
                    </td>
                  </tr>
                {% endfor %}
              </tbody>
          </table>
        </div>
      {% endif %}
    </div> {% endcomment %}
    <div class="display-2">Hoy</div>
    <div class="card text-center">
      <div class="card-body">
        <h4 class="card-title">Hoy</h4>
        <div class="h3">Transacciones:</div>
        <div class="card-text h3">Ventas: {{a}}$</div>
        <div class="card-text h3">Reembolsos: {{a}}$</div>
        <div class="card-text h3">Productos Agotados: {{a}}</div>
        <div class="card-text h3">Dinero Recaudado: {{a}}$</div>
        <div class="card-text h3">Ganancia Recaudada: {{a}}$</div>
        <div class="card-text h3">Visitas: {{visits.total_visits}}</div>
      </div>
    </div>
</div> 



{% endblock  %}